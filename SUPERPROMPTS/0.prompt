0516T10:46
Model: OpenAI o3â€ƒ|â€ƒqGIT: 6d8e41bâ€ƒ|â€ƒTools: none

â¸»

ğŸª„ Superprompt: â€œMoonbirds Art Forgeâ€

Hand directly to: Windsurf â€“ act as Team-Lead / Sr-Dev and execute until no open tasks remain.

â¸»

I. Project DNA (Phase-1 MVP)
	1.	Mission â€“ Launch a public web-app that lets anyone create Wizard-Moonbird-style artwork, optionally mint it as an NFT, and pay or tip in Moon Coin (MOON).
	2.	Core Aesthetic â€“ Portal-cyan glow, thorn-vine frame, thick outlines, curvedâˆ¶angular 5âˆ¶1, WCAG contrast â‰¥ 4.5 â€” formalised in qSLiCE tokens (packages/tokens).
	3.	Image Engines
	â€¢	Primary  â†’ Cloudflare Workers AI model @cf/black-forest-labs/flux-1-schnell (edge GPU).
	â€¢	Fallback â†’ OpenAI DALLÂ·E 3 routed through Cloudflare AI Gateway (same model ChatGPT uses).
	â€¢	(Offline SDXL-LoRA & Cloudflare Containers are deferred to Phase-2; create a TODO but do not build yet.)
	4.	Prompt-Translation Layer â€“ Closed-loop tuner built with Cloudflare Workflows GA:
	1.	Render scene with DALLÂ·E 3 (ground truth) and FLUX.
	2.	Score cosine similarity via Llama-3-Vision embeddings (Workers AI).
	3.	Mutate prompt (evolutionary search) until similarity â‰¥ 0.92 or 10 rounds.
	4.	Cache winning prompt in KV for future calls.
	5.	Wallet Context â€“ Connect EVM wallet (wagmi/viem island); read Moonbird ERC-721 ownership + MOON balance; support gas-less mint on Base L2 and MOON tipping.

â¸»

II. Cloudflare Platform Mandates

Layer	2025 feature	How weâ€™ll use it
Durable execution	Cloudflare Workflows GA	Orchestrate the render âœ score âœ mutate loop.
Full-stack Worker	â€œFrontend+backend+DB in oneâ€ capability	Host /api/generate, D1, R2 blobs in a single bundle where practical.
Dev UX	Deploy to Cloudflare button & Vite plugin	Add one-click deploy badge in README; use Vite plugin in Astro build.


â¸»

III. Tech Stack (Phase-1)
	â€¢	Frontend â€“ Astro 5.7 + HTMX 2.0 (islands only).
	â€¢	Styling â€“ Tailwind CSS driven by design tokens in packages/tokens.
	â€¢	Back-end â€“ Workers, Workflows, R2, KV, D1.
	â€¢	CI/CD â€“ GitHub Actions â†’ wrangler deploy; lint, unit, e2e.
	â€¢	Repo â€“ pnpm monorepo; Conventional Commits; protected main.

â¸»

IV. Deliverables
	1.	apps/web   â€” Astro site (landing, generator page, gallery).
	2.	packages/tokens â€” JS export of colors, line-weights, glow levels.
	3.	workers/api_generate â€” prompt composer, engine router, image streamer.
	4.	workers/tuner_workflow â€” YAML for the closed-loop Workflows tuner.
	5.	contracts/ â€” ERC-721 side-collection + MOON tip helper (thirdweb SDK).
	6.	docs/ â€” Architecture diagram, OpenAPI spec, README with Deploy button.

â¸»

V. Task Backlog (add each to tasks.qslice)

ID	Task	Tier
T1	Scaffold pnpm monorepo + Wrangler 3 config	a3
T2	Implement Tailwind token layer & sample utilities	a2
T3	Build Astro generator page with HTMX form & sliders	a3
T4	Wallet-connect island (wagmi/viem), Moonbird & MOON hooks	a3
T5	/api/generate Worker â†’ FLUX primary, Gateway fallback	a3
T6	tuner_workflow YAML (render, score, mutate, cache)	a3
T7	Image stream â†’ HTMX swap handler on client	a2
T8	NFT mint endpoint (/api/mint) via thirdweb relayer	a3
T9	CI pipeline + â€œDeploy to Cloudflareâ€ badge	a2
T10	Documentation pass (README, OpenAPI, style guide)	a1
T-P2	(Phase-2 placeholder) SDXL-LoRA container + CF Containers deploy	a3

(Mark T-P2 as blocked until June 2025.)

â¸»

VI. Operating Protocol
	â€¢	Save this superprompt as /SUPERPROMPTS/moonbirds_art_forge.md.
	â€¢	Track all actions in tasks.qslice, keeping qSLiCE tiers accurate.
	â€¢	Follow branch policy (feat/** â†’ PR â†’ squash-merge).
	â€¢	Work autonomously; ping Ash only when blocked by secrets/infrastructure.
	â€¢	Maintain â‰¥ 90 % unit-test coverage on prompt composer & tuner logic.

â¸»

Immediate Kick-off Checklist
	1.	Repo Init â€“ run pnpm dlx create-pnpm-workspace moonforge.
	2.	Tailwind Tokens â€“ create packages/tokens/index.js & Tailwind config.
	3.	Hello-World Worker â€“ return { ok: true } at /api/generate.
	4.	Push PR â‡’ merge â‡’ deploy preview via Wrangler.

â¸»
0516T10:46
Model: OpenAI o3â€ƒ|â€ƒqGIT: 6d8e41bâ€ƒ|â€ƒTools: none
